<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Static Site Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 2rem; line-height: 1.6; }
        .test { margin-bottom: 1rem; padding: 1rem; border-radius: 5px; }
        .pass { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .fail { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        button { padding: 0.5rem 1rem; margin: 0.5rem; cursor: pointer; }
    </style>
</head>
<body>
    <h1>My Bounce Place - Static Site Test</h1>
    
    <div id="tests"></div>
    
    <div class="info test">
        <h3>Manual Tests</h3>
        <button onclick="window.open('index.html', '_blank')">Open Main Site</button>
        <button onclick="runBounceHouseTest()">Test Bounce House Data</button>
        <button onclick="runLocalStorageTest()">Test Local Storage</button>
        <button onclick="runNavigationTest()">Test Navigation</button>
    </div>

    <script>
        const tests = [];
        
        function addTest(name, condition, message) {
            tests.push({ name, condition, message });
        }
        
        function runTests() {
            const container = document.getElementById('tests');
            container.innerHTML = '<h2>Automated Tests</h2>';
            
            tests.forEach(test => {
                const div = document.createElement('div');
                div.className = `test ${test.condition ? 'pass' : 'fail'}`;
                div.innerHTML = `
                    <strong>${test.condition ? '✓' : '✗'} ${test.name}</strong><br>
                    ${test.message}
                `;
                container.appendChild(div);
            });
        }
        
        // Test 1: Check if main files exist
        function checkFileExists(url) {
            try {
                const xhr = new XMLHttpRequest();
                xhr.open('HEAD', url, false);
                xhr.send();
                return xhr.status === 200;
            } catch (e) {
                return false;
            }
        }
        
        addTest(
            'Main HTML File',
            checkFileExists('index.html'),
            'index.html should be accessible'
        );
        
        addTest(
            'CSS File',
            checkFileExists('css/styles.css'),
            'css/styles.css should be accessible'
        );
        
        // Test 2: Check if JavaScript files exist and are valid
        const jsFiles = [
            'js/data.js',
            'js/navigation.js', 
            'js/bouncehouses.js',
            'js/waiver.js',
            'js/contact.js',
            'js/app.js'
        ];
        
        jsFiles.forEach(file => {
            addTest(
                `JavaScript File: ${file}`,
                checkFileExists(file),
                `${file} should be accessible`
            );
        });
        
        // Test 3: Check if images exist
        const imageFiles = [
            'images/princess-castle-1.jpg',
            'images/superhero-arena-1.jpg',
            'images/jungle-adventure-1.jpg'
        ];
        
        imageFiles.forEach(file => {
            addTest(
                `Image File: ${file}`,
                checkFileExists(file),
                `${file} should be accessible`
            );
        });
        
        // Test 4: Check localStorage functionality
        function testLocalStorage() {
            try {
                localStorage.setItem('test', 'value');
                const result = localStorage.getItem('test') === 'value';
                localStorage.removeItem('test');
                return result;
            } catch (e) {
                return false;
            }
        }
        
        addTest(
            'Local Storage',
            testLocalStorage(),
            'localStorage should work for form submissions'
        );
        
        // Test 5: Check if HTML5 Canvas is supported (for signature pad)
        function testCanvas() {
            try {
                const canvas = document.createElement('canvas');
                return !!(canvas.getContext && canvas.getContext('2d'));
            } catch (e) {
                return false;
            }
        }
        
        addTest(
            'HTML5 Canvas',
            testCanvas(),
            'Canvas should be supported for signature pad'
        );
        
        // Test 6: Check if fetch API is available (for potential future enhancements)
        addTest(
            'Fetch API',
            typeof fetch !== 'undefined',
            'Fetch API should be available for potential integrations'
        );
        
        // Manual test functions
        function runBounceHouseTest() {
            fetch('js/data.js')
                .then(response => response.text())
                .then(text => {
                    // Simple check for bounce house data structure
                    const hasArray = text.includes('bounceHouses = [');
                    const hasThemes = text.includes('themes = [');
                    const hasCompanyInfo = text.includes('companyInfo = {');
                    
                    const div = document.createElement('div');
                    div.className = `test ${hasArray && hasThemes && hasCompanyInfo ? 'pass' : 'fail'}`;
                    div.innerHTML = `
                        <strong>${hasArray && hasThemes && hasCompanyInfo ? '✓' : '✗'} Bounce House Data Test</strong><br>
                        Bounce Houses Array: ${hasArray ? 'Found' : 'Missing'}<br>
                        Themes Array: ${hasThemes ? 'Found' : 'Missing'}<br>
                        Company Info: ${hasCompanyInfo ? 'Found' : 'Missing'}
                    `;
                    document.getElementById('tests').appendChild(div);
                })
                .catch(e => {
                    const div = document.createElement('div');
                    div.className = 'test fail';
                    div.innerHTML = `<strong>✗ Bounce House Data Test</strong><br>Error: ${e.message}`;
                    document.getElementById('tests').appendChild(div);
                });
        }
        
        function runLocalStorageTest() {
            try {
                // Test waiver storage
                const testWaiver = {
                    id: 'test_' + Date.now(),
                    participantName: 'Test User',
                    timestamp: new Date().toISOString()
                };
                
                localStorage.setItem('test_waivers', JSON.stringify([testWaiver]));
                const retrieved = JSON.parse(localStorage.getItem('test_waivers'));
                
                // Test contact storage
                const testMessage = {
                    id: 'test_msg_' + Date.now(),
                    name: 'Test User',
                    email: 'test@example.com',
                    message: 'Test message'
                };
                
                localStorage.setItem('test_messages', JSON.stringify([testMessage]));
                const retrievedMsg = JSON.parse(localStorage.getItem('test_messages'));
                
                // Cleanup
                localStorage.removeItem('test_waivers');
                localStorage.removeItem('test_messages');
                
                const success = retrieved && retrieved[0].participantName === 'Test User' && 
                               retrievedMsg && retrievedMsg[0].name === 'Test User';
                
                const div = document.createElement('div');
                div.className = `test ${success ? 'pass' : 'fail'}`;
                div.innerHTML = `
                    <strong>${success ? '✓' : '✗'} Local Storage Test</strong><br>
                    Waiver storage: ${retrieved ? 'Working' : 'Failed'}<br>
                    Message storage: ${retrievedMsg ? 'Working' : 'Failed'}
                `;
                document.getElementById('tests').appendChild(div);
                
            } catch (e) {
                const div = document.createElement('div');
                div.className = 'test fail';
                div.innerHTML = `<strong>✗ Local Storage Test</strong><br>Error: ${e.message}`;
                document.getElementById('tests').appendChild(div);
            }
        }
        
        function runNavigationTest() {
            const testPages = ['home', 'bounce-houses', 'about', 'contact', 'faq'];
            let working = true;
            let details = [];
            
            testPages.forEach(page => {
                const url = `index.html#${page}`;
                try {
                    // Simple URL validation
                    new URL(url, window.location.origin);
                    details.push(`${page}: Valid URL`);
                } catch (e) {
                    working = false;
                    details.push(`${page}: Invalid URL`);
                }
            });
            
            const div = document.createElement('div');
            div.className = `test ${working ? 'pass' : 'fail'}`;
            div.innerHTML = `
                <strong>${working ? '✓' : '✗'} Navigation Test</strong><br>
                ${details.join('<br>')}
            `;
            document.getElementById('tests').appendChild(div);
        }
        
        // Run tests when page loads
        window.addEventListener('load', runTests);
    </script>
</body>
</html>